---
title: "rmd_script_analyse"
output: html_document
date: "2024-04-23"
---
Premier bloc de code : importation des librairies.
```{r}
library(dplyr)
library(ggplot2)
library(tidytext)
library(tm)
library(knitr)
library(SemNetCleaner)
data("stop_words")
```
Deuxième bloc de code : définition des variables.
```{r}

#----------------------------- 
earthworms <- read.csv("~/Documents/GitHub/EarthwormsMetanalysis/ExtractionBiblio/metaanalyse_csv_final.csv")
abstracts<-c()
bing<-get_sentiments("bing")
#--------------------- 
names(earthworms)
n = nrow(earthworms)
token_list <- c()
all_words<- c()
all_words_sg<-c()
```
Troisième bloc de code: ajout d'une colonne "aboutEarthworms".
```{r}
earthworms <- earthworms %>% mutate(aboutEarthworms = rep(TRUE,n))
```
Quatrième bloc de code: Construction de la liste des abstracts.
```{r}
 for (i in 1:n){
   abstract.i <-earthworms$Abstract[i]
   abstracts <- c(abstracts, abstract.i)
 }
```
Cinquième bloc de code : Construction de la liste de tokens.
```{r}
   for (i in seq_along(abstracts)) {
     # Unnest tokens for the current abstract
     unnested_tokens <- tibble(abstracts = abstracts[i]) %>%
       unnest_tokens(word, abstracts)
     # Append the unnested tokens to the list
     unnested_tokens<-unnested_tokens%>%anti_join(stop_words)
     token_list<-c(token_list, unnested_tokens)
   }
   mylist.i <- strsplit(abstract.i, split = " ")[[1]]
  if (("earthworm" %in% mylist.i) | ("earthworms" %in% mylist.i)){earthworms$aboutEarthworms[i] = TRUE}else{earthworms$aboutEarthworms[i] = FALSE}
```

